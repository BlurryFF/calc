#include <stdio.h>
#include <windows.h>
#include <conio.h>
#include <math.h>
int main()
{
    SetConsoleOutputCP(CP_UTF8);
    int ch2,znak=0,ch1,st,ost1=0,ost2=0,x=0,y=0,res,k=1;
    double ch_kor,st_kor;
    unsigned char c,pr_vih;
    int koren(double x, double y)
    {
        double res;
        res = pow(x,1/y);
        return res;
    }
    int stepen(int x, int y)
    {
        if (y == 0)
            return 1;
        else
            return pow(x,y);
    }
    printf("Введите первое число:\n");
    while ((scanf("%d", &ch1) != 1) || (ch1 == 2147483647) || (ch1 == -2147483648))
    {
        scanf("%*[^\n]");
        printf("Ошибка\nПовторите ввод:\n");
    }
    ost1 = ch1 % 10;
    rewind(stdin);
    printf("Введите второе число:\n");
    while ((scanf("%d", &ch2) != 1) || (ch2 == 2147483647) || (ch2 == -2147483648))
    {
        scanf("%*[^\n]");
        printf("Ошибка\nПовторите ввод:\n");
    }
    ost2 = ch2 % 10;
    system("cls");
    while (x == 0) {
        switch(k) {
            case 1:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение <--\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 2:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание <--\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 3:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение <--\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 4:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление <--\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 5:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень <--\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 6:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня <--\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 7:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново <--\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
            case 8:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число <--\n9.Изменить второе число\n");
                break;
            case 9:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число <--\n");
                break;
            default:
                printf("======================================\n");
                printf("Первое число = %d\n", ch1);
                printf("Второе число = %d\n", ch2);
                printf("======================================\n");
                printf("1.Сложение <--\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                break;
        }
        while (x == 0) {
            c = getch();
            if ((c >= 49) && (c <= 58))
                k = c - 48;
            if (c == 13)
                break;
            if (c == 224) {
                c = getch();
                switch (c) {
                    case 72:
                        k--;
                        if (k<1)
                            k = 9;
                        break;
                    case 80:
                        k++;
                        if (k > 9)
                            k = 1;
                        break;

                }
            }
            switch(k){
                case 1:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение <--\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 2:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание <--\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 3:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение <--\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 4:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление <--\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 5:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень <--\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 6:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня <--\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 7:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново <--\n8.Изменить первое число\n9.Изменить второе число\n");
                    break;
                case 8:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число <--\n9.Изменить второе число\n");
                    break;
                case 9:
                    system("cls");
                    printf("======================================\n");
                    printf("Первое число = %d\n",ch1);
                    printf("Второе число = %d\n",ch2);
                    printf("======================================\n");
                    printf("1.Сложение\n2.Вычитание\n3.Умножение\n4.Деление\n5.Возведение в степень\n6.Извлечение корня\n7.Ввести числа заново\n8.Изменить первое число\n9.Изменить второе число <--\n");
                    break;
            }
        }
        system("cls");
        switch (k)
        {
            case 1:
                if (((ost1 + ost2) % 10 != (ch1 + ch2) % 10) || ((ch1 > 0) && (ch2 > 0) && (ch1+ch2 < 0)) || (ch1+ch2 == 2147483647) || (ch1+ch2 == -2147483648))
                    printf("======================================\nПревышен диапазон, измените числа\n");
                else
                    printf("======================================\nСумма %d и %d = %d\n", ch1, ch2, ch1 + ch2);
                break;
            case 2:
                if ((ch1-ch2 == 2147483647) || (ch1-ch2 == -2147483648) || ((ch1 > 0) && (ch2 < 0) && ((ost1 + ost2) % 10 != (ch1 - ch2) % 10)) )
                    printf("======================================\nПревышен диапазон, измените числа\n");
                else
                    printf("======================================\nРазность %d и %d = %d\n", ch1, ch2, ch1 - ch2);
                ost2 = abs(ost2);
                ost1 = abs(ost1);
                break;
            case 3:
                if (((ost1 * ost2) % 10 != (ch1 * ch2) % 10) || ((ch1 > 0) && (ch2 > 0) && (ch1*ch2 < 0)) || (((ch1 < 0) && (ch2 > 0)) && (ch1*ch2 > 0)) || (((ch2 < 0) && (ch1 > 0)) && (ch1*ch2 > 0)) || (((ch1 < 0) && (ch2 < 0)) && (ch1*ch2 < 0)))
                    printf("======================================\nПревышен диапазон, измените числа\n");
                else
                    printf("======================================\nПроизведение %d и %d = %d\n", ch1, ch2, ch1 * ch2);
                break;
            case 4:
                if (ch2 != 0)
                    printf("======================================\nЧастное %d и %d = %d\n", ch1, ch2, ch1 / ch2);
                else {
                    printf("======================================\nДеление на 0! Измените второе число\n");
                }
                break;
            case 5:
                if (stepen(ch1, ch2) == -2147483648) {
                    printf("======================================\nПревышен диапазон! Измените числа\n");
                    break;
                }
                if (ch2 >= 0)
                    printf("======================================\n%d в степени %d = %d\n", ch1, ch2, stepen(ch1, ch2));
                else
                    printf("======================================\n%d в степени %d = %.lf\n", ch1, ch2, (1.0) / stepen(ch1, abs(ch2)));
                break;
            case 6:
                st_kor = ch2;
                ch_kor = ch1;
                if (ch1 < 0)
                {
                    printf("======================================\nОтрицательное число под корнем, измените первое число\n");
                    break;
                }
                if (ch2 < 0) {
                    printf("======================================\nОтрицательная степень, измените второе число\n");
                    break;
                }
                if (ch2 == 0){
                    printf("======================================\nКорень нулевой степени, измените второе число\n");
                    break;
                }
                printf("======================================\nКорень %.lf степени из %.lf = %0.lf\n", st_kor, ch_kor, pow(ch_kor, 1 / st_kor));

                break;
            case 7:
                printf("\nВведите первое число:\n");
                while ((scanf("%d", &ch1) != 1) || (ch1 == 2147483647) || (ch1 == -2147483648))
                {
                    scanf("%*[^\n]");
                    printf("Ошибка\nПовторите ввод:\n");
                }
                ost1 = ch1 % 10;
                rewind(stdin);
                printf("\nВведите второе число:\n");
                while ((scanf("%d", &ch2) != 1) || (ch2 == 2147483647) || (ch2 == -2147483648))
                {
                    scanf("%*[^\n]");
                    printf("Ошибка\nПовторите ввод:\n");
                }
                ost2 = ch2 % 10;
                system("cls");
                break;
            case 8:
                printf("\nВведите первое число:\n");
                while ((scanf("%d", &ch1) != 1) || (ch1 == 2147483647) || (ch1 == -2147483648))
                {
                    scanf("%*[^\n]");
                    printf("Ошибка\nПовторите ввод:\n");
                }
                ost1 = ch1 % 10;
                system("cls");
                break;
            case 9:
                printf("\nВведите второе число:\n");
                while ((scanf("%d", &ch2) != 1) || (ch2 == 2147483647) || (ch2 == -2147483648))
                {
                    scanf("%*[^\n]");
                    printf("Ошибка\nПовторите ввод:\n");
                }
                ost2 = ch2 % 10;
                system("cls");
                break;
        }
    }
    return 0;
}
